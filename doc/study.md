# 学習メモ

## **時系列データの扱い方**
参考1: Kaggleで勝つ

### **【バリデーションの枠組みの誤りによるリーク】**

時系列データを扱うタスクで、時間的な情報を考慮せずに特徴量作成、バリデーションを行うと、 バリデーションでは良いスコア が出るにるかかわらず、テストデータでは良いスコアが出ないといったリークを起こすことがある。

- リークが起こる原因
    - 目的変数が、過去の情報を含むことがある
    - 目的変数以外のデータも過去の目的変数の情報を含むことがある

- リークを防ぐ方法
    - あるレコードの特徴量にはその時点より先のデータを使わないようにする
    - 学習データにバリデーションより将来のレコードを含めないようにする

### **【ラグ特徴量】**
データに周期的な動きがある場合は周期に従ってラグを取ることも有効である
- ラグ特徴量 (shift関数)
- 移動平均 (シフトさせて平均、最大、最小、中央値を取る, rolling関数+mean(), max()...）
- 周期に従って間隔を開けてデータを集計 (1, 2, 3週間前)
- リード特徴量

### **【時点と結びついた特徴量】**
- ある時点からの出現回数の累積和、比率
- 過去１週間のサービス利用回数等

### **【予測に使えるデータの期間】
- (注意)テストデータのレコードの時点ごとに使えるデータの期間が異なる。この場合、テストデータの期間が分割時点から何期先であるかによって個別にモデルを作ることが考えられる。例えば、3週間だと21個のモデルを作るとか
- 

***